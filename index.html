<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sari Governance Tool</title>
    <style>
        :root {
            --airbus-blue: #005A9C;
            --light-blue: #e6f0f7;
            --text-dark: #333;
            --text-light: #555;
            --border-color: #ccc;
            --status-green: #28a745;
            --status-orange: #fd7e14;
            --status-red: #dc3545;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 20px;
        }

        /* --- Header & Dashboard --- */
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--airbus-blue);
        }
        .header h1 { margin: 0; color: var(--text-dark); }
        .header h2 { margin: 5px 0 0 0; color: var(--text-light); font-weight: 400; }

        .project-health {
            display: flex;
            justify-content: space-around;
            margin-bottom: 25px;
            padding: 15px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .kpi-card { text-align: center; }
        .kpi-card .kpi-title { font-size: 0.9rem; color: var(--text-light); }
        .kpi-card .kpi-value { font-size: 1.5rem; font-weight: 600; color: var(--airbus-blue); }
        .kpi-card .kpi-value.red { color: var(--status-red); }
        .kpi-card .kpi-value.orange { color: var(--status-orange); }

        /* --- Obere Ãœbersichts-Timeline --- */
        .steps-timeline {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
            background: #fff;
            border-radius: 8px;
        }
        .step-milestone {
            flex-basis: 9%; /* 10 items (S0-S8 + Dry Run) */
            text-align: center;
            padding: 10px 5px;
            border-right: 1px solid #eee;
        }
        .step-milestone:last-child { border-right: none; }
        .step-milestone .step-title {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--airbus-blue);
        }
        .step-milestone .step-date {
            font-size: 0.8rem;
            color: #777;
            margin-top: 5px;
        }
        .step-milestone .step-date.completed {
            color: var(--status-green);
            font-weight: 500;
        }

        /* --- Haupt-Container (scrollbar) --- */
        .steps-details-container {
            display: flex;
            overflow-x: auto;
            padding: 10px 0 20px 0;
            border: 2px solid var(--airbus-blue);
            border-radius: 10px;
            background: #ffffff;
        }

        /* --- S-Step (klappbar) --- */
        .s-step {
            flex: 0 0 380px; /* Breite jedes Steps */
            margin: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
        }
        .s-step[open] { box-shadow: 0 6px 12px rgba(0,0,0,0.1); }
        .s-step summary {
            font-size: 1.25rem;
            font-weight: 600;
            padding: 15px;
            cursor: pointer;
            background-color: #f9f9f9;
            border-radius: 8px 8px 0 0;
            border-bottom: 1px solid var(--border-color);
            outline: none; 
        }
        .s-step[open] summary {
            background-color: var(--airbus-blue);
            color: white;
        }
        .deliverables-list { padding: 15px; }

        /* --- Deliverable-Item --- */
        .deliverable-item {
            margin-bottom: 20px;
            padding: 10px;
            background: #fdfdfd;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
        }
        .deliverable-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .deliverable-title { font-weight: 500; color: var(--text-dark); }
        
        .info-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 1px solid var(--airbus-blue);
            background: var(--light-blue);
            color: var(--airbus-blue);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            padding: 0;
            line-height: 22px;
        }
        .info-btn:hover { background: var(--airbus-blue); color: white; }

        .status-light {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid #555;
            box-shadow: inset 0 0 4px rgba(0,0,0,0.2);
        }
        .status-light.green { background-color: var(--status-green); border-color: #1f7d36; }
        .status-light.orange { background-color: var(--status-orange); border-color: #c46210; }
        .status-light.red { background-color: var(--status-red); border-color: #a72833; }

        .deliverable-input {
            width: 100%;
            box-sizing: border-box; 
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
        }
        .deliverable-input:focus {
            border-color: var(--airbus-blue);
            box-shadow: 0 0 5px rgba(0,90,156,0.3);
            outline: none;
        }

        /* --- 5-Why Template --- */
        .why-template { padding: 5px; }
        .why-level {
            margin-left: 15px;
            padding-left: 15px;
            border-left: 2px solid var(--airbus-blue);
        }
        .why-level > label { font-weight: 500; font-size: 0.9rem; }
        .why-template textarea {
            width: 100%;
            box-sizing: border-box;
            padding: 6px;
            margin-top: 5px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
        }

        /* --- Ishikawa Template --- */
        .ishikawa-diagram {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: auto auto;
            gap: 10px;
            border-right: 4px solid var(--airbus-blue); /* Spine */
            padding: 10px;
            background: #fdfdfd;
        }
        .ishikawa-bone {
            padding: 10px;
            border: 1px solid #eee;
            border-radius: 5px;
            background: #fff;
        }
        .ishikawa-bone h4 {
            margin: 0 0 10px 0;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--airbus-blue);
            color: var(--airbus-blue);
        }
        .ishikawa-bone textarea {
            width: 100%;
            height: 80px;
            box-sizing: border-box;
            border: 1px solid #ddd;
            font-family: monospace;
            font-size: 0.85rem;
        }

        /* --- Info Modal --- */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgba(0,0,0,0.6);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; 
            padding: 20px;
            border: 1px solid #888;
            border-radius: 8px;
            width: 80%; 
            max-width: 600px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .modal-header h3 { margin: 0; color: var(--airbus-blue); }
        .modal-close-btn {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .modal-close-btn:hover { color: black; }
        .modal-body { line-height: 1.6; }
        .modal-body ul { margin-top: 10px; }

    </style>
</head>
<body>

    <div id="info-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Anforderungsdetails</h3>
                <span class="modal-close-btn" id="modal-close">&times;</span>
            </div>
            <div id="modal-body" class="modal-body">
                </div>
        </div>
    </div>

    <div class="header">
        <h1>Sari Governance Tool</h1>
        <h2>SARI SE-25.XXXX</h2>
    </div>

    <div class="project-health">
        <div class="kpi-card">
            <div class="kpi-title">Overall Status</div>
            <div class="kpi-value orange" id="kpi-status">At Risk</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-title">Days Open</div>
            <div class="kpi-value">1</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-title">Current Step</div>
            <div class="kpi-value">S0: Containment</div>
        </div>
        <div class="kpi-card">
            <div class="kpi-title">Next Milestone</div>
            <div class="kpi-value">S0: Kundeninfo</div>
        </div>
    </div>

    <div class="steps-timeline">
        <div class="step-milestone">
            <div class="step-title">S0</div>
            <div class="step-date">Due: 17.10.2025</div>
        </div>
        <div class="step-milestone">
            <div class="step-title">S1</div>
            <div class="step-date">Due: 18.10.2025</div>
        </div>
        <div class="step-milestone">
            <div class="step-title">S2</div>
            <div class="step-date">Due: 20.10.2025</div>
        </div>
        <div class="step-milestone">
            <div class="step-title">S3</div>
            <div class="step-date">Due: 22.10.2025</div>
        </div>
        <div class="step-milestone">
            <div class="step-title">S4</div>
            <div class="step-date">Due: 30.10.2025</div>
        </div>
        <div class="step-milestone" style="background: var(--light-blue);">
            <div class="step-title">Dry Run</div>
            <div class="step-date">tbd</div>
        </div>
        <div class="step-milestone">
            <div class="step-title">S5</div>
            <div class="step-date">tbd</div>
        </div>
        <div class="step-milestone">
            <div class="step-title">S6</div>
            <div class="step-date">tbd</div>
        </div>
        <div class="step-milestone">
            <div class="step-title">S7</div>
            <div class="step-date">tbd</div>
        </div>
        <div class="step-milestone">
            <div class="step-title">S8</div>
            <div class="step-date">tbd</div>
        </div>
    </div>


    <div class="steps-details-container">

        <details class="s-step" open>
            <summary>S0: Containment</summary>
            <div class="deliverables-list">
                
                <div class="deliverable-item" data-due-date="2025-10-17" data-id="s0-d1"
                     data-info-title="Kundeninformation"
                     data-info-text="GemÃ¤ÃŸ Maturity Grid (Benchmark) muss der Kunde innerhalb von 1 Tag informiert werden. Die 'Requirements' Stufe erlaubt maximal 3 Tage. Dies ist ein kritischer KPI fÃ¼r die Kundenzufriedenheit.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">Kundeninformation</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s0-d1-status"></div>
                    </div>
                    <input type="date" class="deliverable-input">
                </div>

                <div class="deliverable-item" data-due-date="2025-10-17" data-id="s0-d2"
                     data-info-title="Aktionsplan (Containment)"
                     data-info-text="Anforderung (Maturity Grid): 'A formal containment action plan is presented (with action responsible, due date, status)'. Dies ist der Nachweis, dass die EindÃ¤mmung systematisch erfolgt.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">Aktionsplan (Containment)</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s0-d2-status"></div>
                    </div>
                    <input type="file" class="deliverable-input">
                </div>
            </div>
        </details>

        <details class="s-step">
            <summary>S1: Team</summary>
            <div class="deliverables-list">
                <div class="deliverable-item" data-due-date="2025-10-18" data-id="s1-d1"
                     data-info-title="MFT & Rollen (Team Charter)"
                     data-info-text="Das Maturity Grid fordert ein vollstÃ¤ndiges MFT (Multi-Functional Team), um Silodenken zu vermeiden. <br>Pflichtrollen sind:<ul><li><b>Leader:</b> Der 9S-Moderator.</li><li><b>Sponsor:</b> Top Management-UnterstÃ¼tzung (Benchmark).</li><li><b>Problem Owner:</b> Manager der Abteilung, in der das Problem entstand.</li><li><b>Operations:</b> Ein Operator oder Inspektor, der die Arbeit tatsÃ¤chlich ausfÃ¼hrt (Benchmark).</li></ul>">
                    <div class="deliverable-header">
                        <span class="deliverable-title">MFT & Rollen</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s1-d1-status"></div>
                    </div>
                    <textarea class="deliverable-input" style="height: 120px;"
                              placeholder="Leader:&#10;Sponsor (Top Mgmt):&#10;Problem Owner (Dept. Mgr):&#10;Operations (Operator):"></textarea>
                </div>
            </div>
        </details>

        <details class="s-step" open>
            <summary>S2: Problem Definition</summary>
            <div class="deliverables-list">
                
                <div class="deliverable-item" data-due-date="2025-10-20" data-id="s2-d1"
                     data-info-title="5W2H Analyse (Pflicht)"
                     data-info-text="Dies ist die Basis jeder guten Untersuchung. Das Grid fordert: '5W & 2H ... based on facts & figures, not on perception'. Die Eingabe MUSS auf Fakten basieren. Das finale Problem-Statement (nÃ¤chstes Feld) leitet sich hieraus ab.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">5W2H Analyse (Pflicht)</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s2-d1-status"></div>
                    </div>
                    <textarea class="deliverable-input" style="height: 150px;" 
                              placeholder="What (1 Object, 1 Defect):&#10;Where:&#10;When:&#10;Who:&#10;Why:&#10;How:&#10;How much:"></textarea>
                </div>

                <div class="deliverable-item" data-due-date="2025-10-20" data-id="s2-d2"
                     data-info-title="IS / IS NOT (Benchmark)"
                     data-info-text="Anforderung (Maturity Grid 'Benchmark'): 'IS / IS NOT to describe the problem when complex'. Dies ist ein Werkzeug zur Abgrenzung des Problemumfangs.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">IS / IS NOT (Benchmark)</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s2-d2-status"></div>
                    </div>
                    <textarea class="deliverable-input" style="height: 100px;" 
                              placeholder="IS:&#10;...&#10;---&#10;IS NOT:&#10;..."></textarea>
                </div>
            </div>
        </details>
        
        <details class="s-step">
            <summary>S3: Validate Containment</summary>
             <div class="deliverables-list">
                <div class="deliverable-item" data-due-date="2025-10-22" data-id="s3-d1"
                     data-info-title="Validierungsnachweis"
                     data-info-text="Das Grid verlangt den *Beweis*, dass die EindÃ¤mmung funktioniert, *bevor* man auf Kundenfeedback wartet. Beispiel (Grid): 'defective product is returned through the cycle to ensure that it is captured in 100% of cases'. Ein einfacher 'Implementiert'-Status reicht nicht aus.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">Validierungsnachweis</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s3-d1-status"></div>
                    </div>
                    <input type="file" class="deliverable-input">
                </div>
            </div>
        </details>

        <details class="s-step" open>
            <summary>S4: Root Cause Analysis</summary>
            <div class="deliverables-list">

                <div class="deliverable-item" data-due-date="2025-10-30" data-id="s4-d1"
                     data-info-title="Ishikawa (Brainstorming)"
                     data-info-text="Das Maturity Grid fordert: 'Brainstorm using Ishikawa... to formalize all potential causes'. Dies dient dazu, alle *potenziellen* Ursachen zu sammeln, bevor man mit 5-Why in die Tiefe geht.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">Ishikawa (Brainstorming)</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s4-d1-status"></div>
                    </div>
                    <div class="ishikawa-diagram">
                        <div class="ishikawa-bone"><h4>Mensch</h4><textarea placeholder="..."></textarea></div>
                        <div class="ishikawa-bone"><h4>Maschine</h4><textarea placeholder="..."></textarea></div>
                        <div class="ishikawa-bone"><h4>Material</h4><textarea placeholder="..."></textarea></div>
                        <div class="ishikawa-bone"><h4>Methode</h4><textarea placeholder="..."></textarea></div>
                        <div class="ishikawa-bone"><h4>Management</h4><textarea placeholder="..."></textarea></div>
                        <div class="ishikawa-bone"><h4>Mitwelt</h4><textarea placeholder="..."></textarea></div>
                    </div>
                </div>
                
                <div class="deliverable-item" data-due-date="2025-10-30" data-id="s4-d2"
                     data-info-title="5-Why (Occurrence / Entstehung)"
                     data-info-text="Pflicht-Analyse (Grid): 'Clear separation between occurrence and non-detection'. Dies ist Pfad 1: Warum ist der Fehler *ENTSTANDEN*? Die Analyse muss bis zur tiefsten technischen Ursache ('lowest level') kaskadiert werden.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">5-Why (Occurrence)</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s4-d2-status"></div>
                    </div>
                    <div class="why-template">
                        <label>Problem (Entstehung):</label>
                        <textarea rows="2" placeholder="Problem..."></textarea>
                        <div class="why-level">
                            <label>1. Why?</label><textarea rows="1" placeholder="..."></textarea>
                            <div class="why-level">
                                <label>2. Why?</label><textarea rows="1" placeholder="..."></textarea>
                                 <div class="why-level">
                                    <label>3. Why?</label><textarea rows="1" placeholder="..."></textarea>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="deliverable-item" data-due-date="2025-10-30" data-id="s4-d3"
                     data-info-title="5-Why (Non-Detection)"
                     data-info-text="Pflicht-Analyse (Grid): Dies ist Pfad 2: Warum wurde der Fehler *NICHT ENTDECKT*? Analysieren Sie die Quality Gates.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">5-Why (Non-Detection)</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s4-d3-status"></div>
                    </div>
                     <div class="why-template">
                        <label>Problem (Nicht-Entdeckung):</label>
                        <textarea rows="2" placeholder="Problem..."></textarea>
                        <div class="why-level">
                            <label>1. Why?</label><textarea rows="1" placeholder="..."></textarea>
                        </div>
                    </div>
                </div>

                <div class="deliverable-item" data-due-date="2025-10-30" data-id="s4-d4"
                     data-info-title="Systemische Ursache (Pflicht)"
                     data-info-text="Pflicht-Analyse (Grid): 'Systemic / management root cause(s) identified'. Was im System (Prozess, Training, Standard) hat die Entstehung *und* Nicht-Entdeckung zugelassen? Dies ist oft die wichtigste Ursache.">
                    <div class="deliverable-header">
                        <span class="deliverable-title">Systemische Ursache</span>
                        <button class="info-btn">?</button>
                        <div class="status-light" id="s4-d4-status"></div>
                    </div>
                     <input type="text" class="deliverable-input" placeholder="Systemische / Management-Ursache">
                </div>
            </div>
        </details>
        
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- Ampel-Logik ---
            const AT_RISK_DAYS = 2; // 2 Tage vorher auf Orange
            const today = new Date("2025-10-16T10:00:00"); // Simuliertes "Heute"
            today.setHours(0, 0, 0, 0); 

            let overallStatus = 'green'; // Dashboard-KPI
            let minDiffDays = Infinity;

            const allDeliverables = document.querySelectorAll('.deliverable-item');

            allDeliverables.forEach(item => {
                const dueDateString = item.dataset.dueDate;
                if (!dueDateString) return;

                const dueDate = new Date(dueDateString);
                dueDate.setHours(0, 0, 0, 0); 

                const statusLight = document.getElementById(item.dataset.id + '-status');
                if (!statusLight) return;

                const diffTime = dueDate.getTime() - today.getTime();
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffTime < 0) {
                    statusLight.classList.add('red');
                    statusLight.title = `Status: Not On Time (FÃ¤llig am ${dueDateString})`;
                    overallStatus = 'red';
                    if (diffDays < minDiffDays) minDiffDays = diffDays;
                } else if (diffDays <= AT_RISK_DAYS) {
                    statusLight.classList.add('orange');
                    statusLight.title = `Status: At Risk (FÃ¤llig in ${diffDays} Tagen)`;
                    if (overallStatus != 'red') overallStatus = 'orange';
                    if (diffDays < minDiffDays) minDiffDays = diffDays;
                } else {
                    statusLight.classList.add('green');
                    statusLight.title = `Status: On Time (FÃ¤llig in ${diffDays} Tagen)`;
                    if (diffDays < minDiffDays) minDiffDays = diffDays;
                }
            });

            // --- Dashboard-KPIs aktualisieren ---
            const kpiStatus = document.getElementById('kpi-status');
            if (overallStatus === 'red') {
                kpiStatus.textContent = 'Late';
                kpiStatus.className = 'kpi-value red';
            } else if (overallStatus === 'orange') {
                kpiStatus.textContent = 'At Risk';
                kpiStatus.className = 'kpi-value orange';
            } else {
                kpiStatus.textContent = 'On Time';
                kpiStatus.className = 'kpi-value green';
            }

            // --- Modal-Logik ---
            const modal = document.getElementById('info-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalBody = document.getElementById('modal-body');
            const closeBtn = document.getElementById('modal-close');

            document.querySelectorAll('.info-btn').forEach(button => {
                button.onclick = function() {
                    const parent = this.closest('.deliverable-item');
                    const title = parent.dataset.infoTitle;
                    const text = parent.dataset.infoText;
                    
                    modalTitle.textContent = title;
                    modalBody.innerHTML = text; // .innerHTML, damit <ul> funktioniert
                    modal.style.display = "block";
                }
            });

            closeBtn.onclick = function() {
                modal.style.display = "none";
            }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        });
    </script>

</body>
</html>
